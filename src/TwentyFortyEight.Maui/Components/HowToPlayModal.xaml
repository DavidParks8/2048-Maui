<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:strings="clr-namespace:TwentyFortyEight.Maui.Resources.Strings"
             xmlns:local="clr-namespace:TwentyFortyEight.Maui.Components"
             x:Class="TwentyFortyEight.Maui.Components.HowToPlayModal"
             x:DataType="local:HowToPlayModal"
             x:Name="this"
             BackgroundColor="Transparent">

    <AbsoluteLayout IsVisible="{Binding IsVisible, Source={x:Reference this}}"
                    Margin="-16,-16,-16,-54"
                    InputTransparent="False">
        
        <!-- Dark overlay background - fills entire layout -->
        <BoxView Color="{StaticResource ModalOverlay}"
                 AbsoluteLayout.LayoutBounds="0,0,1,1"
                 AbsoluteLayout.LayoutFlags="All">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Command="{Binding CloseCommand, Source={x:Reference this}}" />
            </BoxView.GestureRecognizers>
        </BoxView>
        
        <!-- Modal dialog - centered with scroll support -->
        <ScrollView AbsoluteLayout.LayoutBounds="0,0,1,1"
                    AbsoluteLayout.LayoutFlags="All"
                    HorizontalOptions="Center"
                    VerticalOptions="Center">
            <Border BackgroundColor="{AppThemeBinding Light={StaticResource ModalBackgroundLight}, Dark={StaticResource ModalBackgroundDark}}"
                    Stroke="Transparent"
                    StrokeThickness="0"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    MaximumWidthRequest="400"
                    Margin="20">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="16" />
                </Border.StrokeShape>
                <Border.Shadow>
                    <Shadow Brush="Black"
                            Offset="0,4"
                            Radius="20"
                            Opacity="0.3" />
                </Border.Shadow>
            
            <!-- Inner container with padding -->
            <Grid RowDefinitions="Auto,*,Auto" 
                  Padding="28"
                  RowSpacing="16">
                
                <!-- Title -->
                <Label x:Name="HowToPlayTitleLabel"
                       Grid.Row="0"
                       Text="{x:Static strings:AppStrings.HowToPlayTitle}"
                       FontSize="28"
                       FontAttributes="Bold"
                       TextColor="{AppThemeBinding Light={StaticResource NativeTextPrimaryLight}, Dark={StaticResource NativeTextPrimaryDark}}"
                       HorizontalOptions="Center" />
                
                <!-- Content -->
                <Label x:Name="HowToPlayContentLabel"
                       Grid.Row="1"
                       Text="{x:Static strings:AppStrings.HowToPlayContent}"
                       FontSize="16"
                       TextColor="{AppThemeBinding Light={StaticResource NativeTextSecondaryLight}, Dark={StaticResource NativeTextSecondaryDark}}"
                       HorizontalOptions="Start"
                       LineBreakMode="WordWrap"
                       LineHeight="1.3"
                       MaximumWidthRequest="340" />
                
                <!-- Got It Button -->
                <Button x:Name="GotItButton"
                        Grid.Row="2"
                        AutomationId="GotItButton"
                        Command="{Binding CloseCommand, Source={x:Reference this}}"
                        Text="{x:Static strings:AppStrings.GotIt}"
                        BackgroundColor="{AppThemeBinding Light={StaticResource NativeButtonBackgroundLight}, Dark={StaticResource NativeButtonBackgroundDark}}"
                        TextColor="{AppThemeBinding Light={StaticResource NativeButtonTextLight}, Dark={StaticResource NativeButtonTextDark}}"
                        FontSize="18"
                        FontAttributes="Bold"
                        HeightRequest="50"
                        CornerRadius="10"
                        Margin="0,8,0,0"
                        SemanticProperties.Description="{x:Static strings:AppStrings.GotIt}" />
                
            </Grid>
        </Border>
        </ScrollView>
    </AbsoluteLayout>
</ContentView>
