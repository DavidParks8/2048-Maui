<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:strings="clr-namespace:TwentyFortyEight.Maui.Resources.Strings"
             xmlns:local="clr-namespace:TwentyFortyEight.Maui.Components"
             x:Class="TwentyFortyEight.Maui.Components.GameOverModal"
             x:DataType="local:GameOverModal"
             x:Name="this">

    <Grid IsVisible="{Binding IsVisible, Source={x:Reference this}}"
          InputTransparent="False">
        
        <!-- Dark overlay background -->
       <BoxView Color="{StaticResource ModalOverlay}" />
        
        <!-- Modal dialog -->
       <Border Background="{AppThemeBinding Light={StaticResource ModalBackgroundLight}, Dark={StaticResource ModalBackgroundDark}}"
              Stroke="{AppThemeBinding Light={StaticResource GamePanelBackgroundLight}, Dark={StaticResource GamePanelBackgroundDark}}"
                StrokeThickness="3"
                Padding="40,30"
                HorizontalOptions="Center"
                VerticalOptions="Center"
                StrokeShape="RoundRectangle 15"
                MaximumWidthRequest="350">
            <VerticalStackLayout Spacing="20" HorizontalOptions="Center">
                
                <!-- Game Over Title -->
                <Label x:Name="GameOverTitleLabel"
                       Text="{x:Static strings:AppStrings.GameOver}"
                       FontSize="36"
                       FontAttributes="Bold"
                       TextColor="{StaticResource GameStatusAccent}"
                       HorizontalOptions="Center" />
                
                <!-- Score display -->
                <VerticalStackLayout x:Name="ScoreDisplayStack"
                                     Spacing="5"
                                     HorizontalOptions="Center">
                    <Label x:Name="YourScoreLabel"
                           Text="{x:Static strings:AppStrings.YourScore}"
                           FontSize="16"
                           TextColor="{AppThemeBinding Light={StaticResource NativeTextSecondaryLight}, Dark={StaticResource NativeTextSecondaryDark}}"
                           HorizontalOptions="Center" />
                    <Label x:Name="ModalScoreValue"
                           Text="{Binding Score, Source={x:Reference this}}"
                           FontSize="48"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light={StaticResource NativeTextPrimaryLight}, Dark={StaticResource NativeTextPrimaryDark}}"
                           HorizontalOptions="Center" />
                </VerticalStackLayout>
                
                <!-- Best score indicator -->
                <Label x:Name="BestScoreIndicator"
                       Text="{Binding BestScoreText, Source={x:Reference this}}"
                       FontSize="14"
                       TextColor="{AppThemeBinding Light={StaticResource NativeTextTertiaryLight}, Dark={StaticResource NativeTextTertiaryDark}}"
                       HorizontalOptions="Center" />
                
                <!-- New Game Button -->
                <Button x:Name="TryAgainButton"
                    AutomationId="TryAgainButton"
                    Command="{Binding NewGameCommand, Source={x:Reference this}}"
                    Text="{x:Static strings:AppStrings.TryAgain}"
                    Background="{AppThemeBinding Light={StaticResource NativeButtonBackgroundLight}, Dark={StaticResource NativeButtonBackgroundDark}}"
                    TextColor="{AppThemeBinding Light={StaticResource NativeButtonTextLight}, Dark={StaticResource NativeButtonTextDark}}"
                    FontSize="18"
                    FontAttributes="Bold"
                    HeightRequest="55"
                    Padding="30,0"
                    CornerRadius="8"
                    Margin="0,10,0,0"
                    SemanticProperties.Description="{x:Static strings:AppStrings.TryAgain}" />
                
            </VerticalStackLayout>
        </Border>
    </Grid>
</ContentView>
